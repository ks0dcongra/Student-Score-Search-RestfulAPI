kind: pipeline
name: default
steps:
  - name: Build
    image: golang
    commands:
      - go build -v

  - name: test
    image: golang:latest
    commands:
      - go test ./app/http/controller
      - go test ./app/http/middleware
      - go test ./app/repository
      - go test ./app/service
      - go test ./app/model
    when:    # 當觸發條件為fix/ci分支時會執行的動作
      branch:
      - fix/ci

trigger:     # 觸發 pipeline 條件，分支為 master，且進行 push 行為
  branch: 
  - origin/fix/ci
  event:
  - push
  